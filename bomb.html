<html>
   <head>
       
    <title>Hello world</title>
    <script src = "/socket.io/socket.io.js"></script>

</head>

<style>
#image {
    position:absolute;
  height: 64px;
  width: 64px;
background: 
url('sprite.png') 0px 0px;
}
</style>
<body style="width:100%;height:100%">
<div id="demo">
    <p id="image">  </p>
  </div>

<script>
    var socket = io();

 socket.on('message', function(data){
        console.log(data);
        var split = data.split('#');
        switch(split[0]){
        }
    });

var tID; //we will use this variable to clear the setInterval()
var started = false;
function animateScript() {
    if(!started){
    started = true;
  
var    position = 128; //start position for the image slicer
const  interval = 100; //100 ms of interval for the setInterval()
tID = setInterval ( () => {
document.getElementById("image").style.backgroundPosition = 
`-${position}px 0px`; 
//we use the ES6 template literal to insert the variable "position"
if (position < 256)
{ position = position + 64;}
//we increment the position by 256 each time
else
{ position = 64; }
//reset the position to 256px, once position exceeds 1536px
}
, interval ); //end of setInterval
} //end of animateScript()
}

var walkingdown = false;

function walkDown(){
    if(walkingdown){
        var element = document.getElementById("image");
        element.style.top = parseInt(element.style.top) + 5 + 'px';
    setInterval(function(){walkDown();},1000);
    }
}

document.addEventListener("keydown", function(event){
    if (event.code == 'KeyS') {
        if(!walkingdown){
    animateScript();
    walkingdown = true;
    walkDown();
        }
  }
  if (event.code == "KeyW"){
      clearInterval(tID);
      started = false;
  }
});

document.addEventListener("keyup", function(event){
    if (event.code == 'KeyS') {
        clearInterval(tID);
        started = false;
        //walkingdown = false;
  }
  if (event.code == "KeyW"){
      clearInterval(tID);
      started = false;
  }
});
</script>

